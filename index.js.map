{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"50819756-11248eda55a36e78284ebe321\";\nconst PER_PAGE = 15;\n\nexport const getImagesByQuery = async (query, page = 1) => {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: PER_PAGE,\n    };\n\n    try {\n        const response = await axios.get(URL, { params });\n        return response.data;\n    } catch (error) {\n        throw new Error(\"Халепа! Щось пішло не так. Спробуй ще раз пізніше.\");\n    }\n\n};","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst lightbox = new SimpleLightbox(\".gallery a\", { captionsData: \"alt\", captionDelay: 250, });\nconst loadMoreBtn = document.querySelector(\".load-more-button\");\n\nexport const createGallery = images => {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"gallery-item\">\n    <a href=\"${largeImageURL}\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\"/>\n    </a>\n    <div class=\"info\">\n    <p class=\"properties\">Likes <span class=\"value\">${likes}</span></p>\n    <p class=\"properties\">Views <span class=\"value\">${views}</span></p>\n    <p class=\"properties\">Comments <span class=\"value\">${comments}</span></p>\n    <p class=\"properties\">Downloads <span class=\"value\">${downloads}</span></p>\n    </div>\n\n    </li>`).join(\"\");\n\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n};\n\nexport const clearGallery = () => {\n    gallery.innerHTML = \"\";\n};\n\nexport const showLoader = () => {\n    loader.classList.remove(\"hidden\");\n};\n\nexport const hideLoader = () => {\n    loader.classList.add(\"hidden\");\n};\n\nexport const showLoadMoreButton = () => {\n    loadMoreBtn.classList.remove(\"hidden\");\n};\n\nexport const hideLoadMoreButton = () => {\n    loadMoreBtn.classList.add(\"hidden\");\n};","import { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst form = document.querySelector(\".form\");\nconst input = form.elements[\"search-text\"];\nconst loadMoreBtn = document.querySelector(\".load-more-button\");\n\nlet searchQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\n\nform.addEventListener(\"submit\", async event => {\n    event.preventDefault();\n    const query = input.value.trim();\n    if (!query) {\n        iziToast.error({\n            message: \"Please enter a search term!\",\n            position: \"topRight\",\n        });\n        return;\n    };\n\nclearGallery(); \nhideLoadMoreButton();  \nshowLoader();\n\nsearchQuery = query;\ncurrentPage = 1;\n\n   try {\n    const data = await getImagesByQuery(searchQuery, currentPage);\n    totalHits = data.totalHits;\n\n    if (!data.hits.length) {\n            iziToast.error({\n                message: \"Вибач! Немає зображень за твоїм запитом. Будь ласка, спробуй знову!\",\n                position: \"topRight\",\n            });\n            return;\n        }\n        createGallery(data.hits);\n        if (totalHits > data.hits.length) {\n            showLoadMoreButton();\n        }\n    } catch(error) {\n        iziToast.error({\n            message: \"Oops! Something went wrong. Please try again later.\",\n            position: \"topRight\"\n        });\n    } finally {\n        hideLoader(); \n        input.value = \"\";\n    }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n    currentPage += 1;\n    showLoader();\n    hideLoadMoreButton();\n  \n    try {\n      const data = await getImagesByQuery(searchQuery, currentPage);\n      createGallery(data.hits);\n  \n      const { height: cardHeight } = document\n        .querySelector(\".gallery-item\")\n        .getBoundingClientRect();\n  \n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\"\n      });\n  \n      const totalLoaded = document.querySelectorAll(\".gallery-item\").length;\n      if (totalLoaded >= totalHits) {\n        hideLoadMoreButton();\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: \"topRight\"\n        });\n      } else {\n        showLoadMoreButton();\n      }\n    } catch (error) {\n      iziToast.error({\n        message: \"Failed to load more images.\",\n        position: \"topRight\"\n      });\n    } finally {\n      hideLoader();\n    }\n  });"],"names":["URL","API_KEY","PER_PAGE","getImagesByQuery","query","page","params","axios","gallery","loader","lightbox","SimpleLightbox","loadMoreBtn","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","searchQuery","currentPage","totalHits","event","iziToast","data","cardHeight"],"mappings":"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"}